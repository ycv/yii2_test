var JDialog={getDocWidth:function(){return Math.max(document.documentElement.clientWidth,document.body.clientWidth,$(document).width())},getDocHeight:function(){return Math.max(document.documentElement.clientHeight,document.body.clientHeight,$(document).height())+document.documentElement.scrollTop},getWindowHeight:function(){return $(window).height()},getWindowWidth:function(){return $(window).width()}};JDialog.lock={lockBak:null,options:{opacity:.2,site_url:"none"},create:function(){if(null==this.lockBak){var i=document.createElement("DIV");i.id="lock_panel",this.lockBak=i,$(i).on("click",function(){$(this).hide()}),document.body.appendChild(i)}},setSize:function(){null!=this.lockBak&&$(this.lockBak).css({opacity:this.options.opacity,width:JDialog.getDocWidth(),height:JDialog.getDocHeight()})},show:function(){null!=this.lockBak&&$(this.lockBak).fadeIn(500)},hide:function(){null!=this.lockBak&&$(this.lockBak).fadeOut(500)},remove:function(){null!=this.lockBak&&($(this).lockBak.remove(),this.lockBak=null)},work:function(i){this.options=$.extend(this.options,i),this.create(),this.setSize(),this.show();var t=this;if($(window).bind("resize",function(){t.setSize()}),"number"==typeof this.options.timer){var o=this;setTimeout(function(){o.hide()},this.options.timer)}}},JDialog.tip={tipBak:null,options:null,create:function(){if(null==this.tipBak){var i=$('<div class="jtip_box"></div>'),t=$('<div class="jtip_left_icon" id="jdialog_tip_icon"><!--提示图标--></div>'),o=$('<div class="jtip_content" id="jdialog_tip_content"></div>'),n=$('<div class="jtip_right" id="jtip_right"><!--右边圆角--></div>');i.append(t),i.append(o),i.append(n),$("body").append(i),this.tipBak=i}},setContent:function(){null!=this.tipBak&&$("#jdialog_tip_content").html(this.options.content)},center:function(){if(null!=this.tipBak){var i=window.document.body.scrollTop||window.document.documentElement.scrollTop,t=0;if(this.options.width)t=this.options.width;else{var o=$("#jdialog_tip_icon").width()+$("#jtip_loading").width()+21+$("#jtip_right").width();t=o+$("#jdialog_tip_content").width()}var n=(JDialog.getWindowHeight()-$(this.tipBak).height())/2+i;void 0!=this.options.top&&(n=this.options.top+i),$(this.tipBak).css({width:t+"px",top:n+"px",left:(JDialog.getWindowWidth()-t)/2+"px"})}},show:function(){if(null!=this.tipBak){switch(this.options.type){case"warn":$("#jdialog_tip_icon").addClass("jtip_warn");break;case"ok":$("#jdialog_tip_icon").addClass("jtip_ok");break;case"error":$("#jdialog_tip_icon").addClass("jtip_error");break;case"loading":var i=$('<div id="jtip_loading" class="jtip_load_img"><em id="jtip_loading_icon"></em></div>'),t=$("#jdialog_tip_icon");t.addClass("jtip_loading"),i.insertAfter(t);break;default:$("#jdialog_tip_icon").addClass("jtip_warn")}$(this.tipBak).fadeIn()}},remove:function(){null!=this.tipBak&&(this.tipBak.remove(),this.tipBak=null)},work:function(i){this.options={type:"warn",content:"测试提示内容",timer:0},this.options=$.extend(this.options,i),this.create(),this.setContent(),this.show(),this.center();var t=this;$(window).bind("resize",function(){t.center()});var o=this;this.options.timer>0&&setTimeout(function(){o.remove(),o.options.callback&&o.options.callback()},this.options.timer)}},JDialog.win={winBak:null,winBg:null,options:null,create:function(){if(null==this.winBak){var i=$('<div id="jdialog_win_box" class="'+this.options.skin+'" style="position:absolute; display:none;"></div>');0!=this.options.borderWidth&&(this.winBg=$('<div id="jdialog_win_box_bg" style="position:absolute; display:none;"></div>'));var t=$('<div id="jdialog_win_title_box"></div>'),o=$('<div id="jdialog_win_content"></div>'),n=$('<div id="jdialog_win_title"></div>'),s=$('<a class="jdialog_win_close" href="javascript:void(0)" title="关闭"><!--关闭按钮--></a>'),e=this;s.click(function(){return"function"==typeof e.options.callback&&e.options.callback(),e.hide(),!1}),this.options.hasTitle?(t.append(n),t.append(s),i.append(t)):i.css({border:"0px solid red",background:"none"}),i.append(o),$(t).mousedown(function(t){var o=t.pageX-$(i).position().left,n=t.pageY-$(i).position().top;$(document).mousemove(function(t){window.getSelection?window.getSelection().removeAllRanges():document.selection.empty(),$(i).css({top:t.pageY-n+"px",left:t.pageX-o+"px"}),null!=e.winBg&&$(e.winBg).css({top:t.pageY-n-e.options.borderWidth+"px",left:t.pageX-o-e.options.borderWidth+"px"})})}).mouseup(function(){$(document).unbind("mousemove")}),this.winBak=i,$("body").append(i),null!=this.winBg&&$("body").append(this.winBg)}},setPosition:function(){if(null!=this.winBak){var i=0,t=0,o=this.options.position;if("string"==typeof o)if("center"==this.options.position){var n=window.document.body.scrollTop||window.document.documentElement.scrollTop;t=(JDialog.getWindowHeight()-$(this.winBak).height())/2+n,i=(JDialog.getWindowWidth()-this.options.width)/2}else{var s=$(o).offset();t=s.top-$(this.winBak).height(),i=s.left+$(o).width()/2-$(this.winBak).width()/2}else"[object Array]"===Object.prototype.toString.apply(this.options.position)&&(t=o[0],i=o[1]);0>t&&(t=0),0>i&&(i=0),$(this.winBak).css({width:this.options.width+"px",top:t+"px",left:i+"px"}),null!=this.winBg&&$(this.winBg).css({opacity:this.options.borderOpacity,"background-color":this.options.borderColor,width:this.options.width+2*this.options.borderWidth+"px",height:$(this.winBak).height()+2*this.options.borderWidth+"px",top:t-this.options.borderWidth+"px",left:i-this.options.borderWidth+"px"})}},setContent:function(){if(null!=this.winBak)if($("#jdialog_win_title").html(this.options.title),"string"==typeof this.options.content)$("#jdialog_win_content").html(this.options.content);else{if(null==this.options.content)return;$("#jdialog_win_content").append(this.options.content)}},empty:function(){null!=this.winBak&&$("#jdialog_win_content").empty()},show:function(){null!=this.winBak&&($(this.winBak).fadeIn(),null!=this.winBg&&$(this.winBg).fadeIn())},hide:function(){null!=this.winBak&&($(this.winBak).hide(),$(this.winBg).hide())},remove:function(){null!=this.winBak&&($(this.winBak).remove(),$(this.winBg).remove(),this.winBak=null,this.winBg=null,"function"==typeof this.options.callback&&this.options.callback())},work:function(i){this.options={title:"这里显示窗口标题",content:"这里显示内容",width:600,borderWidth:8,borderOpacity:.4,borderColor:"#000000",hasTitle:!0,skin:"default",position:"center",maxWidth:1024},this.options=$.extend(this.options,i),this.options.skin="jdialog_win_"+this.options.skin,"percent"==this.options.widthType&&(this.options.width=this.options.width*JDialog.getWindowWidth()/100,this.options.width>this.options.maxWidth&&(this.options.width=this.options.maxWidth)),this.create(),this.setContent(),this.setPosition(),this.show();var t=this;$(window).bind("resize",function(){t.setPosition()})}},JDialog.confirm={conBak:null,conBg:null,options:null,create:function(){if(null==this.conBak){var i=$('<div id="jdialog_confirm" class="'+this.options.skin+'"></div>');this.conBg=$('<div id="jdialog_confirm_box_bg"></div>');var t=$('<div id="jdialog_confirm_titleBox"></div>'),o=$('<div id="jdialog_confirm_title"></div>'),n=$('<a href="javascript:void(0)" title="关闭"><!--关闭--></a>'),s=this;n.click(function(){return s.hide(),JDialog.lock.lockBak&&JDialog.lock.hide(),!1}),$(t).mousedown(function(t){var o=t.pageX-$(i).position().left,n=t.pageY-$(i).position().top;$(document).mousemove(function(t){window.getSelection?window.getSelection().removeAllRanges():document.selection.empty(),$(i).css({top:t.pageY-n+"px",left:t.pageX-o+"px"}),$(s.conBg).css({top:t.pageY-n-s.options.borderWidth+"px",left:t.pageX-o-s.options.borderWidth+"px"})})}).mouseup(function(){$(document).unbind("mousemove")}),t.append(o),t.append(n);var e=$('<div id="jdialog_confirm_CBOX"></div>'),d=$('<span id="jdialog_confirm_icon"></span>'),a=$('<div id="jdialog_confirm_content"></div>');e.append(d),e.append(a);var h=$('<div id="jdialog_confirm_button"></div>'),l=$('<div id="jdialog_confirm_buttonInner"></div>'),c=function(i,t){var o=$('<a href="javascript:void(0);">'+i+"</a>");return o.click(function(){return t(),!1}),o};for(var p in this.options.button){var r=new c(p,this.options.button[p]);l.append(r)}h.append(l),i.append(t),i.append(e),i.append(h),$("body").append(i),$("body").append(this.conBg),this.setIcon(this.options.icon),this.conBak=i}},setIcon:function(i){var t=$("#jdialog_confirm_icon");switch(i){case"warn":t.addClass("jdialog_confirm_icon_warn");break;case"ok":t.addClass("jdialog_confirm_icon_ok");break;case"error":t.addClass("jdialog_confirm_icon_error");break;case"help":t.addClass("jdialog_confirm_icon_help");break;case"sad":t.addClass("jdialog_confirm_icon_sad");break;case"smile":t.addClass("jdialog_confirm_icon_smile");break;case"laugh":t.addClass("jdialog_confirm_icon_laugh");break;case"loader":t.addClass("jdialog_confirm_icon_loader");break;case"none":t.hide();break;default:t.addClass("jdialog_confirm_icon_warn")}},setContent:function(i){if(i=i||this.options.content,null!=this.conBak){$("#jdialog_confirm_title").html(this.options.title);var t=this.options.width-$("#jdialog_confirm_icon").width()-32;"none"==this.options.icon&&(t=this.options.width),$("#jdialog_confirm_content").css("width",t+"px").html(i)}},setPosition:function(){if(null!=this.conBak){var i=0,t=0,o=this.options.position;if("string"==typeof o||"object"==typeof o)if("center"==o){var n=window.document.body.scrollTop||window.document.documentElement.scrollTop;t=(JDialog.getWindowHeight()-$(this.conBak).height())/2+n,i=(JDialog.getWindowWidth()-this.options.width)/2}else{var s=$(o).offset();switch(this.options.placement){case"left":t=s.top-$(this.conBak).height()/2+$(o).height()/2,i=s.left-$(this.conBak).width()-10;break;case"right":t=s.top-$(this.conBak).height()/2,i=s.left+$(this.options.position).width()+$(this.conBak).width();break;case"bottom":t=s.top+$(this.conBak).height()+10,i=s.left+$(this.options.position).width()/2-$(this.conBak).width()/2;break;default:t=s.top-$(this.conBak).height()-10,i=s.left+$(this.options.position).width()/2-$(this.conBak).width()/2}}else"[object Array]"===Object.prototype.toString.apply(this.options.position)&&(t=o[0],i=o[1]);$(this.conBak).css({width:this.options.width+"px",top:t+"px",left:i+"px"}),$(this.conBg).css({opacity:this.options.opacity,width:this.options.width+2*this.options.borderWidth+"px",height:$(this.conBak).height()+2*this.options.borderWidth+"px",top:t-this.options.borderWidth+"px",left:i-this.options.borderWidth+"px"})}},show:function(){null!=this.conBak&&($(this.conBak).show(),$(this.conBg).show())},hide:function(i){i=i||0,null!=this.conBak&&($(this.conBak).hide(i),$(this.conBg).hide(i),$(window).unbind("resize"))},remove:function(){null!=this.conBak&&($(this.conBak).remove(),$(this.conBg).remove(),this.conBak=null,this.conBg=null)},work:function(i){this.options={width:300,title:"操作提示",content:"确定要执行该操作吗？",position:"center",placement:"top",skin:"default",icon:"warn",shadow:!1,button:{},borderWidth:8,opacity:.3,maxWidth:500},this.options=$.extend(this.options,i),this.options.skin="jdialog_confirm_"+this.options.skin,this.options.shadow&&(this.options.skin+=" jdialog_confirm_"+this.options.skin+"_shadow"),"percent"==this.options.widthType&&(this.options.width=this.options.width*JDialog.getWindowWidth()/100,window.alert(this.options.width),this.options.width>this.options.maxWidth&&(this.options.width=this.options.maxWidth)),this.create(),this.setContent(),this.setPosition(),this.show();var t=this;$(window).bind("resize",function(){t.setPosition()})}};